## Encrypting the Vendor Private Key with crypto.js

The `crypto.js` script is provided to help you encrypt your vendor's private key before creating a new vendor environment. This is required for securely storing the private key in the system. The script uses AES-256-CBC encryption with a randomly generated IV and a key (the value of `frontegg.applications.identity.cryptoKeyV2`).

**How to use the script:**
1. Open `crypto.js` and replace `<to_encrypt>` with your private key string.
2. Replace the hardcoded key with the value of your `frontegg.applications.identity.cryptoKeyV2` secret.
3. Run the script using Node.js:
   ```bash
   node crypto.js
   ```
4. The output will be in the format `<iv>:<encrypted>`, which you should use as the value for `vendorKeys.private` in the vendor creation command.

---

Create your first vendor:

1. Connect to the `task-master` pod (SSH into the pod).
2. Prepare the following details:
   - Email address
   - Password
   - Generate a private/public key pair
     - Encode the public key with base64
     - Encrypt the private key using the crypto secret found at `frontegg.applications.identity.cryptoKeyV2` 
to create the encrypted private key use the crypto.js file and set the output to vendorKeys.private

Example command structure:

```bash
task-master-cli run create-frontegg-env -d '{
    "userData": {
        "email": "",
        "password": ""
    },
    "vendorKeys": {
        "private": "cryptoKeyV2",
        "publicEncoded": "base64 encoded"
    }
}'
```

---

#### Example with values:

```bash
task-master-cli run create-frontegg-env -d '{
    "userData": {
        "email": "devops+onprem@frontegg.com",
        "password": "123456!"
    },
    "vendorKeys": {
        "private": "a659d9c25d2898585dcdb11b6b2d11b8:9a27871d9f8417e21ee11d50650a94d32061968ecdd710d458542b388b6055230c8b52630532d9f292767d3defea904d70e2b55b452b8fa229af987cf833faca4180c6100a5e7d6b0232f7fb52cd64eca4087170b17a472a0ded383d8f5a238ceb78ae4861e93cb74291db8ce64d8ba0b35977225692dd6e6e5ea30cca75b07ad93c872a8bdd5e520919afa6d9f06d398a4c1c43e0732b6660c09e612b25b43f33501c1ba34f5903903c10d0a68fcf85f27b700dc5aa7b9213efb533b6919733be9d81a185634ccee7d508dc177a45bc9b61118d25f64e6e7d6d2d09a85623260662741037085a4039c5c7f656efb1fcd29130e43e73ff692ac9bc1373e2f99f83166338f2f742df29fd2592471d7bd2fc10c52faf76518a21e537d402f452d6aad061fb332a7193096457187aef49f7b1dc089fd0059d6ae1e752abae514ea0177f491584bc8217d0871dacea6afa205f2943f023ace86add7c01bb4ab2194b7dcdc77f077fc2b20bb1ebe67b6b764b791d31bb0acc2529a0116623986b7abb8f7a8de18b1f9345b187d9be7c14ee6dc46cf06337f9ccfc5c0c53ed1699c40fed4346c5395b184d3cb8dcea92782c060196523acbcb37b45c4474c4770bdf16d3c04b9971b6fe7a192d598791fff26a2bce10569be43e11e629a65dfdd613f1b7892acd3dd28a6792deea1db423ed6ece45dcbfcb1d1ef0b8bf73b4380148359749fc496601e84142805286f05747f83acde15decdca6660e2a8df972a2c5b7197849b5bec9c0e4901764286f3bf3007fc7ea72f8e4462c6d6df0e5f7001f24399982412477d00858db10632aa4689942aeb3a3d46f4a5dd4462417063b20738962d227014e7fa43dbe72425f926db63bb56389dcc9a66a6e46c55c8e7f4cefd4f08b7c13fd8c3dacdcbec53b6d437255c3657cd0ebbe4c2d3628da93dacd00c20c0c7e1ea77ab05fd93258650c24d5b862b51f3b90ff58a001e69e2861253ec23d87338c4ef3759d25cf65ffcdbf598ffd2d1964077d678c144fa6bde4b01795a345b60b0c018925ce194a8c41d02560360548f8a39ee86297cce31e7fbddff1a5bc66b6ba823204e1cba8caa449fdbb76aaccb9343cb69b40878457f5e3b464a3986992a92fa564a4ad88533b13e4f9f33035022904c8de4f10cacd88afd8a48363bb3b3fe801d54dab969596c4152795d4296c1fc78f7373e9913645a4eed8c50aeebfd2d784da08bdd61abd40f7b5d42a7e48cc01d2c2e8d4ca498ca39314842367d3205cc9860ded2bcc75eca4a3a89d29e481fc7277b7873dace78f31e87dba691a2b1482181dac0a3f2a58dd42206ca160948a00af72895216d3336286562ba646412d216008b90f602b3d78af8e36cfd2ac8f0548a3df24479140779587296df1d8e046175c49a8bac87289dc0428f20b69b47eb70be66ad7ae3b118b30e5b713d40c19ce8ad085d649ca4046a264cc74b0bfca443fcf0643855feac14624c12b28258b168590937eb19ce3601e04b65e6df5e6cb6826a8e55bf2a18fdb160a710158fc386f83549ca29c4d7ea6f504fdba6b5a0674593910fd8014eb45dd3a056329dc6b89e57c26f7155eab0c3a49f5f27e21baa76759819c3a1a550b592739d96a2444598557109550d6953c1f056bccfc37b65d72c29f66fc28b0ad0d5a0f13f6c7b3cd414e32a2f0f533322827b6bac266a6a18524dbd8a417dc57e214daf483eee6a0b2fb659d6ebd36d1125ad2dd3e773747b0435a2328bebcc0b584e3e2af55f41955d0c3115d53763bf7709db889437a57687c3d651614228ce3dcf9784b8fa1c56eea99767309504fe2aefe1bfa92e0080373919c2a4499dbee5276064c618dd347572f95319f08af36db67ca45b2075baf48eeb892efd81a380686b512886dd22b33271b7c466d224169b5923e86f6f90342b0a34083f5058bde9d1d8345e95f9ebd267e392d7081de6337050218c5dee1e43eb332ebc9b16677d802bedb729ea8cf1336b8c4a5e3161f94d7f4f3d5cd013f8641f6305f0ecc9ff387d77ffbf71b910234d450841bc745f4c1cffe3c11d761e08c2311b5ce33511a78b1961e660cb7cb0aac4da6d2e0710633d3231ee2db883a95c8863ac680a54507c8ffa4cd4c199c223d386cea5bdcb5f5d01efd64e840676e7f1223f0d0788e044713960ef565c2c1666828f7d3bb5a8bdaadb325034201b5877be649e6d28a0aebc39eec5c4eeeb2b21f068d0a644b333f77333538d2050280eef59c722d26701999276c8994dc9e8556a83bef100ec09649cc5c1fac2f2f5a0dd4c97678e0ee54addaff50ccc2a166e037a98826b0d0a7596daf53d83d64c4b4ef07876acc5ac70c363feaf8076f80c5",
        "publicEncoded": "LS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS0KTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUF2UldDQWdpbTB4WEN6RFBZaU9XWApkOGZpcndiQUkyQmhBMFlpK3FHTDJoOFY4UkMvRE5TWnV0VkVYeTI1LzFlZG5kd2lPMGthSnc1Z3BxTm0wY09NCjk2NlgrK1NGSlBvaVJJNUZlUFhHTFF5a3FmVlI2dDZCcGxpaE5uTVlvZGNqamRXb09yUG96TyttN1BtbU82TFYKS3Q4VndGdU15anl4ZVFtSERBNTdiRldsN0ZmV0ZPbGl1Ty9DejhNb3pMVWxOYUtOaTcyOFd2MTNQUGN3UWRzNwppV1NVQ2ttT3pkbm1YWnp3VGNqRGh3cHdwSzBuY0p2clRGNXBqdGlxeDcwMXlVWnJhQTlQcHdkd2NlZkd1YTlXCkt4aDRUcG9PR3lZWEtBL1BvVW9PWU1hZy9NTWI2UVlyQWVnSDJLRTBxSTZjK1g4ZjBFNityWnY3R0ptYjIyeU0KVVFJREFRQUIKLS0tLS1FTkQgUFVCTElDIEtFWS0tLS0tCg=="
    }
}'

