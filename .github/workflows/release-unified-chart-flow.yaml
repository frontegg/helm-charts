---
name: unified-chart release flow

on:
  workflow_dispatch:
  push:
    branches:
      - master
    paths:
      - common/unified-chart/**

concurrency:
  group: ${{ github.workflow }}

jobs:
  stg:
    uses: frontegg/helm-charts/.github/workflows/release-chart-version.yaml@master
    with:
      environment: staging
  ca-au:
    needs: release-stg
    uses: frontegg/helm-charts/.github/workflows/release-chart-version.yaml@master
    with:
      environment: production-au
  us:
    needs: release-ca-au
    uses: frontegg/helm-charts/.github/workflows/release-chart-version.yaml@master
    with:
      environment: production-us
  eu:
    needs: release-us
    uses: frontegg/helm-charts/.github/workflows/release-chart-version.yaml@master
    with:
      environment: production-global
